
# INTEREST POINT DETECTION
# -----------------------------------

# run params
strategy: 'python'
dsxy: 2
dsz: 2
min_intensity: 0
max_intensity: 255
sigma: 1.8
threshold: 0.008
file_type: 'tiff'
file_source_detection: 's3'
xml_file_path_detection: "IP_TIFF_XML/dataset.xml"
xml_bucket_name_detection: "rhapso-tif-sample"
image_file_path: 's3://rhapso-tif-sample/IP_TIFF_XML/'
image_bucket_name: "rhapso-tif-sample"
output_file_path: "output"
output_bucket_name: 'rhapso-matching-test'
offset: 0
combine_distance: .5
mem_per_worker_bytes: 0
run_type: dask

# INTEREST POINT MATCHING
# -----------------------------------

xml_file_path_matching: 's3://rhapso-matching-test/output/dataset-detection.xml'
n5_matching_output_path: 's3://rhapso-matching-test/output'

# match_type: "rigid"               
# # -- Candidates --
# num_neighbors: 3
# redundancy: 0
# significance: 3                    # ratio of distance
# search_radius: 300
# num_required_neighbors: 3
# # -- Ransac --
# model_min_matches: 18              # min number inlier factor = 6
# inlier_factor: 5.0                 # max epsilon
# lambda_value: 0.1                  # min inlier ratio
# num_iterations: 10000
# regularization_weight: 1.0

match_type: "affine"                   
# -- Candidates --
num_neighbors: 3
redundancy: 0
significance: 3                  # ratio of distance
search_radius: 100
num_required_neighbors: 3
# -- Ransac --
model_min_matches: 28            # min number inlier factor = 5
inlier_factor: 5.0               # max epsilon
lambda_value: 0.05               # min inlier ratio
num_iterations: 10000
regularization_weight: 1.0

# SOLVER
# -----------------------------------

fixed_views: [ 'timepoint: 18, setup: 0', 'timepoint: 30, setup: 0']
model: "affine"
alignment_option: 1
relative_threshold: 3.5
absolute_threshold: 7.0
min_matches: 3
damp: .4
max_iterations: 100000
max_allowed_error: 5.0
max_plateauwidth: 200
file_source_solver: 's3'
xml_bucket_name_solver: 'interest-point-detection'
xml_file_path_solver: 'output/dataset-detection.xml'
data_prefix: 'output/interestpoints.n5'
xml_file_path_output: 'output/dataset-solve.xml'